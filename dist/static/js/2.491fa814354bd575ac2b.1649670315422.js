webpackJsonp([2],{"56QR":function(e,t,a){e.exports=a.p+"static/img/img_examine.5a8c143.png"},"L+s5":function(e,t,a){e.exports=a.p+"static/img/img_rejecte.ebaf0a8.png"},"d+j7":function(e,t,a){e.exports=a.p+"static/img/img_pass.022086a.png"},mkEI:function(e,t){},"py/+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("3cXf"),r=a.n(l),i=a("HzJ8"),s=a.n(i),o=a("Fdjv"),n=[{key:0,name:"待审批",class:"wait",imgUrl:a("56QR")},{key:1,name:"已通过",class:"active_color",imgUrl:a("d+j7")},{key:2,name:"已拒绝",class:"dis",imgUrl:a("L+s5")}],c=[{key:1,value:"招待费：餐饮、礼品发票、烟酒发票等"},{key:2,value:"交通费：打车租车票、地铁票、公交票"},{key:3,value:"差旅费：住宿、火车票、飞机票、长途汽车票"},{key:4,value:"福利费：餐饮、食品发票等"},{key:5,value:"通讯费：电话费、手机费"},{key:6,value:"办公费：办公用品发票、图书发票、日用品发票"},{key:7,value:"培训费：培训费发票、培训费收据"},{key:8,value:"会议费：会议费发票"},{key:9,value:"快递费：快递费发票"},{key:10,value:"咨询费：中介服务发票"},{key:11,value:"业务宣传费（印刷传单费用发票等）"},{key:12,value:"车辆费：停车、洗车、保养、加油发票"},{key:13,value:"保险费：保险发票"},{key:14,value:"服务费：个人垫付对公付款"},{key:15,value:"固定资产"}],p={data:function(){return{leagueForm:{title:"",detail:[{use_type:"",cnt:"",total_amount:""}],company_user:[]},payer_list:[],voucher_files:[],invoice_files:[],userList:[],fileList:[],totalUser:0,dialogVisible:!1,dialogImageUrl:"",approval_list:[],reverse:!1,srcList:[],userTypeKeys:c,process_state:""}},filters:{statusFilter:function(e){return n.find(function(t){return t.key==e}).name}},computed:{numTotal:function(){var e=0,t=!0,a=!1,l=void 0;try{for(var r,i=s()(this.leagueForm.detail);!(t=(r=i.next()).done);t=!0){var o=r.value;e+=Number(o.total_amount||0)}}catch(e){a=!0,l=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw l}}return e},upcaseTotal:function(){return Object(o.c)(this.numTotal)||"零元"},formateImgUrl:function(){var e="";if(4===this.process_state)e=a("L+s5");else if("[]"!=r()(this.approval_list)){var t=this.approval_list[this.approval_list.length-1].approval_opinions;e=n.find(function(e){return e.key==t}).imgUrl}return e},isReject:function(){var e=!1;return 4===this.process_state?e=!0:"[]"!=r()(this.approval_list)&&(e=2===this.approval_list[this.approval_list.length-1].approval_opinions),e}},created:function(){var e=this;this.$http.get("/adminapi/reimburse/approve_detail",{id:this.$route.query.id}).then(function(t){if(t){e.leagueForm.title=t.info.title,e.leagueForm.payee_name=t.info.payee_name,e.leagueForm.payee_city=t.info.payee_city,e.leagueForm.payee_card=t.info.payee_card,e.leagueForm.pay_bank=t.info.payee_bank,e.leagueForm.open_city=t.info.open_city,e.leagueForm.detail=t.detail_list,e.payer_list=t.payer_list,e.voucher_files=t.voucher_files,e.invoice_files=t.invoice_files,e.totalUser=0,e.process_state=t.info.process_state;var a=!0,l=!1,r=void 0;try{for(var i,o=s()(t.payer_list);!(a=(i=o.next()).done);a=!0){var n=i.value;e.totalUser+=Number(n.num||0)}}catch(e){l=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(l)throw r}}var c=!0,p=!1,u=void 0;try{for(var m,_=s()(t.attachments);!(c=(m=_.next()).done);c=!0){var v=m.value;e.srcList.push(v.file_path)}}catch(e){p=!0,u=e}finally{try{!c&&_.return&&_.return()}finally{if(p)throw u}}e.leagueForm.company_user=t.company_user,e.approval_list=t.approval_list}})},methods:{formateClass:function(e){return n.find(function(t){return t.key==e}).class},back:function(){this.$router.go(-1)}}},u={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"out_wrap"},[l("div",{staticClass:"center mb35 hidden"},[l("el-button",{staticClass:"fl",attrs:{size:"mini",round:""},on:{click:e.back}},[l("i",{staticClass:"el-icon-arrow-left"}),e._v("返回")])],1),e._v(" "),l("el-form",{ref:"ruleForm",staticClass:"mb35 wd700 pr",attrs:{model:e.leagueForm,"label-width":"150px"}},[l("section",{staticClass:"pa status-img"},[l("img",{directives:[{name:"show",rawName:"v-show",value:e.formateImgUrl,expression:"formateImgUrl"}],attrs:{src:e.formateImgUrl,alt:"审批状态"}})]),e._v(" "),l("el-form-item",{staticClass:"minH130",attrs:{label:"审批人"}},e._l(e.approval_list||[],function(t,r){return l("section",{key:r,staticClass:"process pr"},[l("el-image",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:a("BXEE"),fit:"cover"}}),e._v(" "),l("div",{staticClass:"person-wrap"},[l("span",[e._v(e._s(t.name))]),e._v(" "),l("span",{class:e.formateClass(t.approval_opinions)},[e._v(e._s(e._f("statusFilter")(t.approval_opinions)))]),e._v(" "),l("span",{directives:[{name:"show",rawName:"v-show",value:""!=t.approval_time,expression:"approval.approval_time != ''"}]},[e._v(e._s(e.$dateFormat(1e3*t.approval_time,1)))]),e._v(" "),l("span",{directives:[{name:"show",rawName:"v-show",value:""!=t.approval_reason,expression:"approval.approval_reason != ''"}]},[e._v(e._s(t.approval_reason))])])],1)}),0),e._v(" "),l("el-form-item",{attrs:{label:"流程主题",prop:"title"}},[l("el-input",{attrs:{type:"text",placeholder:"流程主题"},model:{value:e.leagueForm.title,callback:function(t){e.$set(e.leagueForm,"title",t)},expression:"leagueForm.title"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"收款信息",prop:"payee_name"}},[l("el-input",{attrs:{type:"text",placeholder:"请输入收款人姓名",clearable:""},model:{value:e.leagueForm.payee_name,callback:function(t){e.$set(e.leagueForm,"payee_name",t)},expression:"leagueForm.payee_name"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"",prop:"payee_card"}},[l("el-input",{attrs:{type:"text",placeholder:"请输入收款卡号",clearable:""},on:{input:function(t){e.leagueForm.payee_card=e.leagueForm.payee_card.replace(/\D/g,"")}},model:{value:e.leagueForm.payee_card,callback:function(t){e.$set(e.leagueForm,"payee_card",t)},expression:"leagueForm.payee_card"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"",prop:"pay_bank"}},[l("el-input",{attrs:{type:"text",placeholder:"请输入收款账号开户行",clearable:""},model:{value:e.leagueForm.pay_bank,callback:function(t){e.$set(e.leagueForm,"pay_bank",t)},expression:"leagueForm.pay_bank"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"",prop:"open_city"}},[l("el-input",{attrs:{type:"text",placeholder:"请输入收款城市",clearable:""},model:{value:e.leagueForm.open_city,callback:function(t){e.$set(e.leagueForm,"open_city",t)},expression:"leagueForm.open_city"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"报销明细",required:""}},[e._l(e.leagueForm.detail,function(t,a){return l("div",{key:a,staticClass:"border-item mb15"},[l("el-select",{staticClass:"w100 mb22",attrs:{clearable:"",filterable:"",disabled:"",placeholder:"请选择报销明细"},model:{value:t.use_type,callback:function(a){e.$set(t,"use_type",a)},expression:"item.use_type"}},e._l(e.userTypeKeys,function(e){return l("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}),1),e._v(" "),l("el-input",{staticClass:"w100 mb22",attrs:{type:"text",placeholder:"请输入发票张数"},on:{input:function(e){t.cnt=t.cnt.replace(/\D/g,"")}},model:{value:t.cnt,callback:function(a){e.$set(t,"cnt",a)},expression:"item.cnt"}},[l("i",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("张")])]),e._v(" "),l("el-input",{staticClass:"w100 mb15",attrs:{type:"text",placeholder:"需要报销金额（金额只能小于或等于发票上的金额/可用团建费）"},model:{value:t.total_amount,callback:function(a){e.$set(t,"total_amount",a)},expression:"item.total_amount"}},[l("i",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("元")])]),e._v(" "),0==a?l("div",{staticStyle:{width:"33px"}}):e._e()],1)}),e._v(" "),l("div",{staticClass:"bf1 flex",staticStyle:{padding:"6px"}},[l("div",{staticClass:"flex1"},[e._v("合计")]),e._v(" "),l("div",{staticClass:"flex1"},[e._v(e._s(e.upcaseTotal))]),e._v(" "),l("div",{staticClass:"flex1"},[e._v(e._s(e.numTotal)+"元")])])],2),e._v(" "),l("el-form-item",{attrs:{label:"付款公司",required:""}},e._l(e.payer_list,function(t,a){return l("div",{key:a},[l("el-input",{staticClass:"w100 mb22",attrs:{type:"text",disabled:"",placeholder:"付款公司",readonly:""},model:{value:t.company_name,callback:function(a){e.$set(t,"company_name",a)},expression:"item.company_name"}}),e._v(" "),l("el-popover",{attrs:{placement:"top",width:t.user_name.length>=30?700:300,trigger:"click"}},[l("h4",{staticClass:"user_title"},[e._v("参与员工")]),e._v(" "),l("div",{staticClass:"usrtlist"},e._l(t.user_name,function(t){return l("el-tag",{key:t},[e._v(e._s(t))])}),1),e._v(" "),l("div",{attrs:{slot:"reference"},slot:"reference"},[l("el-input",{staticClass:"w100 mb22",attrs:{type:"text",disabled:"",placeholder:"参与员工"},model:{value:t.pay_user_num,callback:function(a){e.$set(t,"pay_user_num",a)},expression:"item.pay_user_num"}},[l("i",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("人")])])],1)]),e._v(" "),l("el-input",{staticClass:"w100 mb22",attrs:{type:"text",disabled:"",placeholder:"付款金额"},model:{value:t.pay_money,callback:function(a){e.$set(t,"pay_money",a)},expression:"item.pay_money"}}),e._v(" "),l("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入备注",resize:"none"},model:{value:t.remark,callback:function(a){e.$set(t,"remark",a)},expression:"item.remark"}})],1)}),0),e._v(" "),2!=e.$route.query.type?l("el-form-item",{attrs:{label:"发票"}},[e.invoice_files&&e.invoice_files.length>0?l("div",e._l(e.invoice_files,function(t,a){return l("p",{key:a,staticStyle:{margin:"0"}},[e._v("\n          "+e._s(t.file_name)+"\n        ")])}),0):e._e()]):e._e(),e._v(" "),l("el-form-item",{attrs:{label:2==e.$route.query.type?"报销票务相关附件":"报销单"}},[e.voucher_files&&e.voucher_files.length>0?l("div",e._l(e.voucher_files,function(t,a){return l("p",{key:a,staticStyle:{margin:"0"}},[e._v("\n          "+e._s(t.file_name)+"\n        ")])}),0):e._e()]),e._v(" "),l("el-form-item",{attrs:{label:"团建图集"}},e._l(e.srcList,function(t,a){return l("div",{key:a,staticStyle:{display:"inline-block","margin-right":"10px"}},[l("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.srcList[a],"preview-src-list":e.srcList}})],1)}),0)],1),e._v(" "),l("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("img",{attrs:{width:"100%",src:e.dialogImageUrl}})])],1)},staticRenderFns:[]};var m=a("C7Lr")(p,u,!1,function(e){a("mkEI")},"data-v-3b40d3c0",null);t.default=m.exports}});