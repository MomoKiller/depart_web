webpackJsonp([18],{airl:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("beg3"),n=a("YO/D"),l={data:function(){return{queryControl:{month:new Date,company_id:"",depart_id:"",process_state:""},pageControl:{pageNumber:1,pageSize:10,total:0},tableData:[],num:0,money:0}},created:function(){this.query(this.pageControl.pageNumber)},methods:{query:function(t){var e=this;this.pageControl.pageNumber=t,this.$http.get("/adminapi/reimburse/reimburse_list",{month:this.$dayFormat(this.queryControl.month,3),company_id:this.queryControl.company_id,depart_id:this.queryControl.depart_id,process_state:this.queryControl.process_state,page:t,limit:this.pageControl.pageSize}).then(function(t){t&&(e.tableData=t.list.data,e.pageControl.total=t.list.total,e.num=t.total_num,e.money=t.total_money)})},handleCurrentChange:function(t){this.query(t)},handleSizeChange:function(t){this.queryControl.pageSize=t,this.query(1)},exportFile:function(){this.$http.get("/adminapi/reimburse/export_reimburse_list",{month:this.$dayFormat(this.queryControl.month,3),company_id:this.queryControl.company_id,depart_id:this.queryControl.depart_id,process_state:this.queryControl.process_state},null,{responseType:"blob"}).then(function(t){if(t){var e=window.URL.createObjectURL(new Blob([t]),{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"}),a=document.createElement("a");a.href=e,a.download="报销列表.xls",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(e)}})},handleViewDetails:function(t){this.$router.push("/reimbursementSituation?id="+t.id+"&type=1")}},components:{ComCompany:o.a,ComProject:n.a}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"out_wrap"},[a("div",{staticClass:"flex_between search mb22"},[a("div",{staticClass:"left"},[a("el-date-picker",{attrs:{type:"month",placeholder:"选择月份",editable:!1,clearable:!1,disabled:!1,"picker-options":t.$pickOption(1)},on:{change:function(e){return t.query(1)}},model:{value:t.queryControl.month,callback:function(e){t.$set(t.queryControl,"month",e)},expression:"queryControl.month"}}),t._v(" "),a("com-company",{staticClass:"w150 inline",attrs:{id:t.queryControl.company_id},on:{Cchange:function(e){t.queryControl.company_id=e,t.query(1)}}}),t._v(" "),a("com-project",{staticClass:"w150 inline",attrs:{id:t.queryControl.depart_id},on:{Dchange:function(e){t.queryControl.depart_id=e,t.query(1)}}}),t._v(" "),a("el-select",{staticClass:"w150",attrs:{placeholder:"请选择报销状态",clearable:"",filterable:""},on:{change:function(e){return t.query(1)}},model:{value:t.queryControl.process_state,callback:function(e){t.$set(t.queryControl,"process_state",e)},expression:"queryControl.process_state"}},[a("el-option",{attrs:{label:"已完成",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"已撤销",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"待审批",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"已拒绝",value:"4"}})],1)],1),t._v(" "),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.exportFile}},[t._v("导出")])],1)]),t._v(" "),a("div",{staticClass:"fs16 bf1 mb22",staticStyle:{padding:"15px 30px"}},[a("span",[t._v("报销次数："),a("span",{staticClass:"bold"},[t._v(t._s(t.num||0)+"次")])]),t._v(" "),a("span",{staticClass:"ml20"},[t._v("费用合计："),a("span",{staticClass:"bold"},[t._v(t._s(t.money||"0.00")+"元")])])]),t._v(" "),a("el-table",{staticClass:"w100",attrs:{data:t.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"act_name",label:"团建活动","min-width":"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"company_name",label:"公司","min-width":"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"申请人",width:"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"payee_name",label:"收款人",width:"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"total_money",label:"团建费用",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.total_money||"0.00")+"元")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"申请时间",width:"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.$dateFormat(1e3*e.row.create_time,1)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"报销状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.process_state?a("div",[a("span",{staticClass:"ableBadge"}),t._v("已完成\n        ")]):t._e(),t._v(" "),2==e.row.process_state?a("div",[a("span",{staticClass:"returnBadge"}),t._v("已撤销\n        ")]):t._e(),t._v(" "),3==e.row.process_state?a("div",[a("span",{staticClass:"waitBadge"}),t._v("待审批\n        ")]):t._e(),t._v(" "),4==e.row.process_state?a("div",[a("span",{staticClass:"disBadge"}),t._v("已拒绝\n        ")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"active_color",on:{click:function(a){return t.handleViewDetails(e.row)}}},[t._v("详情")])]}}])})],1),t._v(" "),t.tableData.length>0?a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.pageControl.pageNumber,"page-size":t.pageControl.pageSize,"page-sizes":t.pagesizes,total:t.pageControl.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}}):t._e()],1)},staticRenderFns:[]};var s=a("C7Lr")(l,r,!1,function(t){a("lTd+")},"data-v-40c83127",null);e.default=s.exports},"lTd+":function(t,e){}});