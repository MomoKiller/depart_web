webpackJsonp([13],{Frpc:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("4YfN"),n=i.n(s),a=i("dNAe"),r={data:function(){return{tableData:[],mode:1,visible:!1,editInfo:{},ruleForm:{},rules:{send_day:[{required:!0,message:"请选择日期",trigger:"change"}],money:[{required:!0,message:"请输入额度",trigger:"change"}]}}},created:function(){this.query(),this.queryConfig()},methods:{query:function(){var e=this;Object(a.p)(1).then(function(t){t&&(e.tableData=t)})},queryConfig:function(){var e=this;this.$http.post("/adminapi/set/get_config").then(function(t){t&&(e.ruleForm=t)})},add:function(){this.mode=1,this.editInfo={},this.visible=!0},edit:function(e){this.mode=2,this.editInfo=n()({},e),this.visible=!0},del:function(e){var t=this;this.$confirm("确定删除该团建类型吗？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post("/adminapi/set/del_type",{id:e.id}).then(function(e){e&&(t.$message({type:"success",message:"删除成功!"}),t.query())})}).catch(function(){})},submitForm:function(){var e=this;if(!this.editInfo.name)return this.$message("请输入团建类型名称"),!1;this.$http.post(1==this.mode?"/adminapi/set/add_type":"/adminapi/set/edit_type",1==this.mode?{name:this.editInfo.name}:{id:this.editInfo.id,name:this.editInfo.name}).then(function(t){t&&(e.$message({type:"success",message:1==e.mode?"新增成功":"编辑成功"}),e.query(),e.visible=!1)})},numChange:function(){this.ruleForm.money=this.ruleForm.money.replace(/[^\d\.]/g,""),this.ruleForm.money=this.ruleForm.money.replace(/^\./g,""),this.ruleForm.money=this.ruleForm.money.replace(/\.{2,}/g,"."),this.ruleForm.money=this.ruleForm.money.replace(".","$#$").replace(/\./g,"").replace("$#$","."),this.ruleForm.money=this.ruleForm.money.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")},sub:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.$http.post("/adminapi/set/update_config",{send_day:t.ruleForm.send_day,money:t.ruleForm.money}).then(function(e){e&&(t.$message({type:"success",message:"修改成功"}),t.queryConfig())})})}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"_config flex"},[i("div",{staticClass:"config_left white mr15"},[i("p",{staticClass:"right"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.add}},[e._v("新增团建类型")])],1),e._v(" "),i("el-table",{staticClass:"w100",attrs:{data:e.tableData,"tooltip-effect":"dark"}},[i("el-table-column",{attrs:{prop:"name",label:"团建类型","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("a",{staticClass:"edit",on:{click:function(i){return e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),i("a",{staticClass:"del",on:{click:function(i){return e.del(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-dialog",{attrs:{title:1==e.mode?"新增团建类型":"编辑团建类型",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[i("el-input",{attrs:{type:"text",placeholder:"请输入团建类型名称",clearable:""},model:{value:e.editInfo.name,callback:function(t){e.$set(e.editInfo,"name",t)},expression:"editInfo.name"}}),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确定")])],1)],1)],1),e._v(" "),i("div",{staticClass:"config_right white flex1"},[i("p",{staticClass:"fs16 bold"},[e._v("团建费计算")]),e._v(" "),i("el-form",{ref:"ruleForm",staticClass:"mb35",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"入职：",prop:"send_day"}},[i("div",{staticClass:"flex_middle"},[e._v("\n          当月"),i("el-select",{staticStyle:{width:"100px",margin:"0 5px"},attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:e.ruleForm.send_day,callback:function(t){e.$set(e.ruleForm,"send_day",t)},expression:"ruleForm.send_day"}},e._l(31,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}),1),e._v(" 日(含)前入职,团建费下发。次月开始1日下发\n        ")],1)]),e._v(" "),i("el-form-item",{attrs:{label:"离职：",required:""}},[i("div",{staticClass:"flex_middle"},[e._v("当月离职,扣除当月团建费")])]),e._v(" "),i("el-form-item",{attrs:{label:"清零：",required:""}},[i("div",{staticClass:"flex_middle"},[e._v("元旦保留上年度剩余团建费用的30%")])]),e._v(" "),i("el-form-item",{attrs:{label:"额度：",prop:"money"}},[i("el-input",{staticStyle:{width:"230px"},attrs:{type:"text",placeholder:"请输入额度"},on:{input:e.numChange},model:{value:e.ruleForm.money,callback:function(t){e.$set(e.ruleForm,"money",t)},expression:"ruleForm.money"}},[i("template",{slot:"append"},[e._v("元/月")])],2)],1)],1),e._v(" "),i("p",{staticClass:"center"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sub("ruleForm")}}},[e._v("保存")])],1)],1)])},staticRenderFns:[]};var o=i("C7Lr")(r,l,!1,function(e){i("cqcr")},"data-v-86a0dc12",null);t.default=o.exports},cqcr:function(e,t){}});