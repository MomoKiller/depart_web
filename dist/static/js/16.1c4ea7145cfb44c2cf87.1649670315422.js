webpackJsonp([16],{"Lg3+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("lC5x"),r=a.n(l),n=a("4YfN"),s=a.n(n),i=a("J0Oq"),o=a.n(i),u=(a("dNAe"),a("ZoQJ"),a("Fdjv")),c={data:function(){return{queryControl:{year:new Date,activity_status:"",apply_status:"",page:1,limit:10},total:0,total_user:0,tableData:[],approvalList:[{id:1,title:"待审核"},{id:2,title:"已同意 "},{id:3,title:"已拒绝"},{id:4,title:"已撤销"}],applyList:[{id:1,title:"未报销"},{id:2,title:"报销中 "},{id:3,title:"已报销"}]}},created:function(){this.getList()},filters:{filterTime:function(t){var e=new Date(1e3*t);return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+e.getDate()}},methods:{getList:function(){var t=this;return o()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/direction/direction_list",s()({},t.queryControl,{year:t.queryControl.year.getFullYear()}));case 2:a=e.sent,t.tableData=a.list?a.list.data:[],t.info=a.list?{depart:a.info}:{},t.total=a.list?a.list.total:0,t.total_user=a.list?a.total_user:0;case 7:case"end":return e.stop()}},e,t)}))()},handleCurrentChange:function(t){this.queryControl.page=t,this.getList()},handleSizeChange:function(t){this.queryControl.page=1,this.queryControl.limit=t,this.getList()},changeSelect:function(){this.queryControl.page=1,this.getList()},exportFile:function(){var t={year:this.queryControl.year.getFullYear(),activity_status:this.queryControl.activity_status,apply_status:this.queryControl.apply_status};Object(u.d)("/direction/export_reimburse_list",t,"定向列表.xls")}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"out_wrap direct-manage"},[a("div",{staticClass:"flex_between search mb22"},[a("div",{staticClass:"left"},[a("el-date-picker",{attrs:{type:"year",placeholder:"选择年份",editable:!1,clearable:!1,disabled:!1,"picker-options":t.$pickOption(1)},on:{change:t.changeSelect},model:{value:t.queryControl.year,callback:function(e){t.$set(t.queryControl,"year",e)},expression:"queryControl.year"}}),t._v(" "),a("el-select",{staticClass:"w150",attrs:{placeholder:"审批状态",clearable:"",filterable:""},on:{change:t.changeSelect},model:{value:t.queryControl.activity_status,callback:function(e){t.$set(t.queryControl,"activity_status",e)},expression:"queryControl.activity_status"}},t._l(t.approvalList,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),t._v(" "),a("el-select",{staticClass:"w150",attrs:{placeholder:"报销状态",clearable:"",filterable:""},on:{change:t.changeSelect},model:{value:t.queryControl.apply_status,callback:function(e){t.$set(t.queryControl,"apply_status",e)},expression:"queryControl.apply_status"}},t._l(t.applyList,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push("/directManage/limitQuery")}}},[t._v("额度查询")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.exportFile}},[t._v("导出")])],1)]),t._v(" "),a("div",{staticClass:"info"},[a("span",[t._v("团建次数")]),t._v(" "),a("span",{staticClass:"bold"},[t._v(t._s(t.total))]),t._v(" "),a("span",[t._v(" 涉及人次")]),t._v(" "),a("span",{staticClass:"bold"},[t._v(t._s(t.total_user))])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"定向团建"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.$router.push("/league_detail?id="+e.row.id+"&type=2")}}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"申请人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user_num",label:"参与人数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"activity_type",label:"团建形式"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"团建日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.start_date)+"至"+t._s(e.row.end_date)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"发起时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("filterTime")(e.row.create_time))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"审批状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.approvalList[e.row.status]?t.approvalList[e.row.status].title:"")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"报销状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.applyList.find(function(t){return t.id==e.row.cost_status}).title||"")+"\n      ")]}}])})],1),t._v(" "),t.tableData.length>0?a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.queryControl.page,"page-size":t.queryControl.limit,"page-sizes":t.pagesizes,total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}}):t._e()],1)},staticRenderFns:[]};var d=a("C7Lr")(c,p,!1,function(t){a("hMHq")},"data-v-58ebdf2a",null);e.default=d.exports},hMHq:function(t,e){}});